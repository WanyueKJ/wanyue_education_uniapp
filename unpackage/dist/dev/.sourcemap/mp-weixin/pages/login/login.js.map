{"version":3,"sources":["webpack:////Users/wangxiaowen/Desktop/Kaiyuan/pages/login/login.vue?e6bc","uni-app:///pages/login/login.vue","webpack:////Users/wangxiaowen/Desktop/Kaiyuan/pages/login/login.vue?9ab2","webpack:////Users/wangxiaowen/Desktop/Kaiyuan/pages/login/login.vue?df84","uni-app:///main.js","webpack:////Users/wangxiaowen/Desktop/Kaiyuan/pages/login/login.vue?95d8","webpack:////Users/wangxiaowen/Desktop/Kaiyuan/pages/login/login.vue?1734","webpack:////Users/wangxiaowen/Desktop/Kaiyuan/pages/login/login.vue?beca"],"names":["createPage","Page"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"login-all-wrap\">\r\n\t\t<uni-status-bar></uni-status-bar>\r\n\t\t<view class=\"top-wrap\">\r\n\t\t\t<template v-if=\"iswechat == 1\">\r\n\t\t\t\t<view class=\"iconfont icon-ego-close flex align-center justify-center font-lg\" style=\"width: 100rpx; height: 100rpx; font-weight: bold;\"\r\n\t\t\t\t hover-class=\"bg-light\" @click=\"back\"></view>\r\n\t\t\t</template>\r\n\t\t\t<button type=\"default\" @click=\"register\" class=\"reg-btn\">注册</button>\r\n\t\t\t<button class=\"captcha-login-btn\" @click=\"chanloginType('captcha')\" :class=\"{currentLogin : (loginType == 'captcha')}\">验证码登录</button>\r\n\t\t\t<button class=\"pass-login-btn\" @click=\"chanloginType('pass')\" :class=\"{currentLogin : (loginType == 'pass')}\">密码登录</button>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"text-center\" style=\"padding-bottom: 70rpx;\r\n\t\tfont-size: 55rpx;\">\r\n\r\n\t\t</view>\r\n\r\n\t\t<view class=\"px-2 login-input-wrap\">\r\n\t\t\t<template v-if=\"!status\">\r\n\t\t\t\t<view class=\"mb-2\">\r\n\t\t\t\t\t<input type=\"text\" placeholder-style=\"color:#C9C9C9\" v-model=\"username\" placeholder=\"请输入您的手机号\" class=\"border-bottom p-2\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"verify-code-wrap mb-2 flex align-stretch\">\r\n\t\t\t\t\t<input type=\"text\" placeholder-style=\"color:#C9C9C9\" v-model=\"password\" :placeholder=\"placeholder\" class=\"border-bottom p-2 flex-1\" />\r\n\t\t\t\t\t<view class=\"border-bottom flex align-center justify-center font text-light-muted\" @click=\"getSmsCode\" style=\"width: 150rpx;\">\r\n\t\t\t\t\t\t{{get_captcha_txt}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"login-btn-wrap py-2 px-2\">\r\n\t\t\t<button class=\"login-btn bg-main text-white\" style=\"border-radius: 50rpx; border: 0;\" type=\"primary\" :enabled=\"false\"\r\n\t\t\t :class=\"{ opatity: enabled}\" @click=\"submit\">\r\n\t\t\t\t登录\r\n\t\t\t</button>\r\n\r\n\t\t\t<navigator v-show=\"isForgetShow\" class=\"forget-pass\" url=\"/pages/forget_pass/forget_pass\">{{foretPass}}</navigator>\r\n\r\n\t\t</view>\r\n\r\n\t\t<view class=\"flex align-center justify-center pt-1 pb-3 login-icon-all-wrap\">\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<button @click=\"wechatlogin\" open-type=\"getUserInfo\" style=\"background-color: #FFFFFF;\">\r\n\t\t\t\t<view :class=\"{loginThreeShow : (login_by_wx == true)}\" class=\"loginThreeHide uni-tag-text--primary font-sm\">\r\n\t\t\t\t\t<image class=\"login-icon\" src=\"../../static/images/login_wx.png\" mode=\"\"></image>\r\n\t\t\t\t\t<text class=\"login-icon-text font-sm\">微信登录</text>\r\n\t\t\t\t</view>\r\n\t\t\t</button>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t<view :class=\"{loginThreeShow : (login_by_wx == true)}\" class=\"loginThreeHide uni-tag-text--primary font-sm\" @tap=\"wechatlogin\"\r\n\t\t\t open-type='getUserInfo'>\r\n\t\t\t\t<image class=\"login-icon\" src=\"../../static/images/login_wx.png\" mode=\"\"></image>\r\n\t\t\t\t<text class=\"login-icon-text font-sm\">微信登录</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<view :class=\"{loginThreeShow : (login_by_qq == true)}\" class=\"loginThreeHide uni-tag-text--primary font-sm\" @tap=\"qqlogin\">\r\n\t\t\t\t<image class=\"login-icon\" src=\"../../static/images/login_qq.png\" mode=\"\"></image>\r\n\t\t\t\t<text class=\"login-icon-text font-sm\">QQ登录</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"flex align-center justify-center\">\r\n\r\n\t\t</view>\r\n\r\n\t\t<view class=\"flex align-center justify-center login-botttom-text font-sm\">\r\n\t\t\t登录即代表你已同意<text @click=\"gotoxieyi\" class=\"xieyi font-sm\">《用户协议》</text>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport uniStatusBar from '@/components/uni-ui/uni-status-bar/uni-status-bar.vue';\r\n\timport otherLogin from '@/components/common/other-login.vue';\r\n\timport md5_js from \"@/static/js/md5.js\";\r\n\r\n\tconst app = getApp();\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniStatusBar,\r\n\t\t\totherLogin\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tiswechat: 1,\r\n\t\t\t\tstatus: \"\",\r\n\t\t\t\tlogin_by_wx: false,\r\n\t\t\t\tlogin_by_qq: false,\r\n\t\t\t\tusername: \"\",\r\n\t\t\t\tusernameFlag: \"\",\r\n\t\t\t\tpassword: \"\",\r\n\t\t\t\tphone: \"\",\r\n\t\t\t\tcode: \"\",\r\n\t\t\t\tcodeTime: 0,\r\n\t\t\t\tloginType: \"\",\r\n\t\t\t\tplaceholder: \"请输入验证码\",\r\n\t\t\t\tget_captcha_txt: \"\",\r\n\t\t\t\tforetPass: \"\",\r\n\t\t\t\tisForgetShow: false,\r\n\t\t\t\tsmsType: 0, //获取验证码类型 0 登录 1 注册 2忘记密码\r\n\t\t\t\tsign: '', //加密后的签名串\r\n\t\t\t\tjumpPage: '',\r\n\t\t\t\tkeyword: '',\r\n\t\t\t\tunionid: '',\r\n\t\t\t\tnickName: '',\r\n\t\t\t\tavatar: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady: function() {\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tthis.iswechat = 0;\r\n\t\t\tthis.login_by_wx = true;\r\n\t\t\t// #endif\r\n\r\n\r\n\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t// 获取登录方式开关\r\n\t\t\tuni.request({\r\n\t\t\t\turl: app.globalData.site_url + \"Login.GetLoginType\",\r\n\t\t\t\tdata: {},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (parseInt(res.data.data.code) != 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res.data.data.info[0] != '') {\r\n\t\t\t\t\t\tthis.login_by_qq = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res.data.data.info[1] != '') {\r\n\t\t\t\t\t\tthis.login_by_wx = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// #endif\r\n\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tif (option.page != '') {\r\n\t\t\t\tthis.jumpPage = option.page;\r\n\t\t\t}\r\n\r\n\t\t\tif (option.keyword != '') {\r\n\t\t\t\tthis.keyword = option.keyword;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlet {\r\n\t\t\t\tstatusBarHeight\r\n\t\t\t} = uni.getSystemInfoSync();\r\n\t\t\tthis.statusBarHeight = statusBarHeight;\r\n\t\t\tthis.loginType = 'captcha';\r\n\t\t\tthis.get_captcha_txt = \"获取验证码\";\r\n\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tenabled: function() {\r\n\t\t\t\tif (this.username == '' || this.password == '') {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgotoxieyi() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../login/xieyi',\r\n\t\t\t\t\tsuccess: res => {},\r\n\t\t\t\t\tfail: () => {},\r\n\t\t\t\t\tcomplete: () => {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tqqlogin() {\r\n\r\n\r\n\t\t\t\tvar that = this;\r\n\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'qq',\r\n\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\t// console.log(loginRes);\r\n\t\t\t\t\t\t// 获取用户信息\r\n\r\n\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\tprovider: 'qq',\r\n\t\t\t\t\t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t\t\t\t\tconsole.log(infoRes);\r\n\t\t\t\t\t\t\t\tvar nickName = infoRes.userInfo.nickName;\r\n\t\t\t\t\t\t\t\tvar avatarUrl = infoRes.userInfo.avatarUrl;\r\n\t\t\t\t\t\t\t\tvar unionid = infoRes.userInfo.openId;\r\n\t\t\t\t\t\t\t\tthat.thirdlogin(unionid, nickName, avatarUrl, 1, 2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t},\r\n\t\t\twechatlogin() {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t// 登录\r\n\t\t\t\tconsole.log('微信小程序登录');\r\n\t\t\t\tlet gData = app.globalData;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '登录中...',\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\t\t\t\twx.login({\r\n\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t// 发送 res.code 到后台换取 openId, sessionKey, unionId\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.code = res.code;\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\tsuccess: (info) => {\r\n\r\n\t\t\t\t\t\t\t\tvar data = JSON.parse(info.rawData);\r\n\t\t\t\t\t\t\t\tthis.nickName = data.nickName;\r\n\t\t\t\t\t\t\t\tthis.avatar = data.avatarUrl;\r\n\r\n\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\turl: gData.site_url + \"Login.GetUnionid\",\r\n\t\t\t\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t'code': this.code\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res2) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('Login.GetUnionid');\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res2);\r\n\t\t\t\t\t\t\t\t\t\tthat.unionid = res2.data.data.unionid;\r\n\t\t\t\t\t\t\t\t\t\tthat.thirdlogin(that.unionid, that.nickName, that.avatar, 2, 3);\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// wxa78ad20db2e78eb9\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\tvar that = this;\r\n\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\t console.log(loginRes);\r\n\t\t\t\t\t\t// 获取用户信息\r\n\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t\t\t\t\tconsole.log(infoRes);\r\n\r\n\t\t\t\t\t\t\t\tvar nickName = infoRes.userInfo.nickName;\r\n\t\t\t\t\t\t\t\tvar avatarUrl = infoRes.userInfo.avatarUrl;\r\n\t\t\t\t\t\t\t\tvar unionid = infoRes.userInfo.unionId;\r\n\t\t\t\t\t\t\t\tthat.thirdlogin(unionid, nickName, avatarUrl, 2, 2);\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tthirdlogin(unionid, nickName, avatar, type, source) {\r\n\t\t\t\tconsole.log(unionid, nickName, avatar)\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet sign = this.sort2url({\r\n\t\t\t\t\t'openid': unionid,\r\n\t\t\t\t\t'type': type\r\n\t\t\t\t});\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: app.globalData.site_url + \"Login.LoginByThird\",\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t'openid': unionid,\r\n\t\t\t\t\t\t'source': source,\r\n\t\t\t\t\t\t'type': type,\r\n\t\t\t\t\t\t'nicename': nickName,\r\n\t\t\t\t\t\t'avatar': avatar,\r\n\t\t\t\t\t\t'sign': sign,\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: res.data.data.msg,\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (parseInt(res.data.data.code) !== 0) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 存入 全局变量\r\n\t\t\t\t\t\tapp.globalData.userinfo = res.data.data.info[0];\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tlet url = '../index/index';\r\n\t\t\t\t\t\t\tlet gData = app.globalData;\r\n\t\t\t\t\t\t\tif (gData.login_jump.page != '') {\r\n\t\t\t\t\t\t\t\turl = gData.login_jump.page;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//注册\r\n\t\t\tregister() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../reg/reg\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tback() {\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: \"../index/index\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinitForm() {\r\n\t\t\t\tthis.username = '';\r\n\t\t\t\tthis.password = '';\r\n\t\t\t\tthis.phone = '';\r\n\t\t\t\tthis.code = '';\r\n\t\t\t\tthis.isForgetShow = false;\r\n\t\t\t},\r\n\t\t\t// 切换登录\r\n\t\t\tchanloginType(type) {\r\n\t\t\t\tif (type == 'captcha') {\r\n\t\t\t\t\tthis.loginType = 'captcha';\r\n\t\t\t\t\tthis.placeholder = '请输入验证码';\r\n\t\t\t\t\tthis.get_captcha_txt = \"获取验证码\";\r\n\t\t\t\t\tthis.foretPass = '';\r\n\t\t\t\t\tthis.isForgetShow = false;\r\n\t\t\t\t} else if (type == 'pass') {\r\n\t\t\t\t\tthis.loginType = 'pass';\r\n\t\t\t\t\tthis.placeholder = \"请输入密码\";\r\n\t\t\t\t\tthis.get_captcha_txt = '';\r\n\t\t\t\t\tthis.foretPass = '忘记密码';\r\n\t\t\t\t\tthis.isForgetShow = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取验证码\r\n\t\t\tgetSmsCode() {\r\n\t\t\t\t//防止重复获取 \r\n\t\t\t\tif ((this.usernameFlag == this.username) && this.codeTime > 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"验证码5分钟有效, 请勿多次发送\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.validate()) return;\r\n\r\n\t\t\t\tlet sign = this.sort2url({\r\n\t\t\t\t\t'account': this.username,\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//调用验证码接口\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: app.globalData.site_url + \"Login.GetCode\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taccount: this.username,\r\n\t\t\t\t\t\ttype: this.smsType, //0登录1注册2忘记密码\r\n\t\t\t\t\t\tsign: sign, //加密md5串\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tenv: 'weixin'\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: res.data.data.msg\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (parseInt(res.data.data.code) !== 0) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.codeTime = 300;\r\n\t\t\t\t\t\tthis.usernameFlag = this.username;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet timer = setInterval(() => {\r\n\t\t\t\t\tif (this.codeTime >= 1) {\r\n\t\t\t\t\t\tthis.codeTime--;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.codeTime = 0;\r\n\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\t//验证\r\n\t\t\tvalidate() {\r\n\t\t\t\tvar mPattern = /^1[3456789][0-9]\\d{8}$/;\r\n\t\t\t\tthis.phone = this.username;\r\n\t\t\t\tif (!mPattern.test(this.phone)) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '手机号格式不正确',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t//更多验证\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t// 字典序排序\r\n\t\t\tsort2url(arr1) {\r\n\r\n\t\t\t\tvar newkey = Object.keys(arr1).sort();\r\n\t\t\t\tvar newObj = {};\r\n\t\t\t\tfor (var i = 0; i < newkey.length; i++) { //遍历newkey数组\r\n\t\t\t\t\tnewObj[newkey[i]] = arr1[newkey[i]]; //向新创建的对象中按照排好的顺序依次增加键值对\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar text = \"\";\r\n\t\t\t\tfor (var index in newObj) {\r\n\t\t\t\t\ttext = text + index + \"=\" + newObj[index] + \"&\";\r\n\t\t\t\t}\r\n\t\t\t\ttext = text.substr(0, text.length - 1);\r\n\t\t\t\ttext += '&' + app.globalData.sign_key;\r\n\r\n\t\t\t\treturn md5_js.hex_md5(text);\r\n\t\t\t},\r\n\t\t\t// 提交\r\n\t\t\tsubmit() {\r\n\t\t\t\tlet url;\r\n\t\t\t\tlet data;\r\n\t\t\t\tif (this.loginType == 'captcha') {\r\n\t\t\t\t\t// 表单验证\r\n\t\t\t\t\tif (!this.validate()) return;\r\n\t\t\t\t\tlet sign = this.sort2url({\r\n\t\t\t\t\t\t'username': this.username,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\turl = app.globalData.site_url + \"Login.LoginByCode\";\r\n\t\t\t\t\tdata = {\r\n\t\t\t\t\t\tusername: this.username,\r\n\t\t\t\t\t\tcode: this.password, //验证码\r\n\t\t\t\t\t\tsource: 3, //0web，1android，2ios，3小程序\r\n\t\t\t\t\t\tsign: sign, //加密md5串\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tenv: 'weixin'\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\turl = app.globalData.site_url + \"Login.Login\";\r\n\t\t\t\t\tdata = {\r\n\t\t\t\t\t\tusername: this.username,\r\n\t\t\t\t\t\tpass: this.password,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet that = this;\r\n\r\n\t\t\t\t//登录处理\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: res.data.data.msg,\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (parseInt(res.data.data.code) !== 0) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 存入 全局变量\r\n\t\t\t\t\t\tapp.globalData.userinfo = res.data.data.info[0];\r\n\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tlet url = '../index/index';\r\n\t\t\t\t\t\t\tlet gData = app.globalData;\r\n\t\t\t\t\t\t\tif (gData.login_jump.page != '') {\r\n\t\t\t\t\t\t\t\turl = gData.login_jump.page;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.login-all-wrap {\r\n\t\tpadding: 0 15rpx;\r\n\t}\r\n\r\n\t/*三方登录默认隐藏*/\r\n\t.loginThreeHide {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.loginThreeShow {\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t.reg-btn {\r\n\t\tfloat: right;\r\n\t\t/* #ifdef MP-WEIXIN*/\r\n\t\tmargin-top: 0rpx;\r\n\t\t/* #endif */\r\n\t\t/* #ifdef APP-PLUS*/\r\n\t\tmargin-top: -90rpx;\r\n\t\t/* #endif */\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #646464;\r\n\t}\r\n\r\n\t.top-wrap button {\r\n\t\tdisplay: inline-block;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\toverflow: inherit;\r\n\t}\r\n\r\n\tbutton::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.captcha-login-btn,\r\n\t.pass-login-btn {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #646464;\r\n\t}\r\n\r\n\t.currentLogin {\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 44rpx;\r\n\t}\r\n\r\n\t/* 输入框部分 */\r\n\t.login-input-wrap input {\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t.border-bottom {\r\n\t\tcolor: #C9C9C9;\r\n\t}\r\n\r\n\t.verify-code-wrap {\r\n\t\tmargin-top: 60rpx;\r\n\t}\r\n\r\n\r\n\t/*登录按钮部分*/\r\n\t.login-btn-wrap {\r\n\t\tmargin-top: 80rpx;\r\n\t\theight: 90rpx;\r\n\t}\r\n\r\n\t.login-btn-wrap button {\r\n\t\tfont-size: 30rpx;\r\n\t\theight: 100%;\r\n\t\tline-height: 90rpx;\r\n\t}\r\n\r\n\t/* 登录按钮 输入内容时,去掉灰色效果 */\r\n\t.login-btn {\r\n\t\tbackground: linear-gradient(to right, #7BD68E, #65CCB9);\r\n\t}\r\n\r\n\t.opatity {\r\n\t\topacity: 0.5;\r\n\t}\r\n\r\n\t/* 登录图标 */\r\n\t.login-icon-all-wrap {\r\n\t\tmargin-top: 320rpx;\r\n\t}\r\n\r\n\t.login-icon {\r\n\t\tcolor: #60E28B;\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 88rpx;\r\n\t\theight: 88rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 88rpx;\r\n\t\tfont-size: 80rpx;\r\n\t}\r\n\r\n\t.qq-login-icon {\r\n\t\tcolor: #63C6EF;\r\n\t}\r\n\r\n\t.uni-tag-text--primary {\r\n\t\tmargin: 0 60rpx;\r\n\t}\r\n\r\n\t.uni-tag-text--primary text {\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.login-icon-text {\r\n\t\tcolor: #646464 !important;\r\n\t}\r\n\r\n\t.login-botttom-text {\r\n\t\tcolor: #646464;\r\n\t}\r\n\r\n\t.xieyi {\r\n\t\tcolor: #45DCAC;\r\n\t\tfont-size: small !important;\r\n\t}\r\n\r\n\t/* 忘记密码 */\r\n\t.forget-pass {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #C9C9C9;\r\n\t\ttext-align: right;\r\n\t\tmargin-top: 30rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1610436422650\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }"],"sourceRoot":""}